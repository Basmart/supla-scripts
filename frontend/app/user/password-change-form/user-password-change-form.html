<div class="container">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h1 view-title>Zmień hasło</h1>
            <div class="well">
                <div class="alert alert-info"
                    ng-if="$ctrl.isPasswordExpired">
                    <fa name="unlock"
                        class="alert-icon"></fa>
                    <strong>Twoje hasło wygasło.</strong> Wymagana jest jego zmiana.
                </div>
                <div class="alert alert-danger fx-fade-down"
                    ng-if="$ctrl.passwordNotValid">
                    <fa name="ban"
                        class="alert-icon"></fa>
                    Podane obecne hasło nie jest poprawne.
                </div>
                <form name="passwordForm"
                    novalidate
                    promise-btn
                    ng-submit="$broadcast('show-errors-check-validity') && passwordForm.$valid && $ctrl.changeUserPassword()">
                    <div class="form-group"
                        show-errors>
                        <label>Obecne hasło</label>
                        <input type="password"
                            name="currentPassword"
                            required
                            class="form-control"
                            ng-model="$ctrl.change.currentPassword">
                    </div>
                    <div class="form-group"
                        show-errors>
                        <label>Nowe hasło</label>
                        <input type="password"
                            name="newPassword"
                            class="form-control"
                            required
                            different-than="{{$ctrl.change.currentPassword}}"
                            ng-minlength="6"
                            ng-pattern="/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/"
                            ng-model="$ctrl.change.newPassword">
                        <span class="help-block">Co najmniej 6 znaków, co najmniej jedna litera i cyfra, inne niż obecne.</span>
                    </div>
                    <div class="form-group"
                        show-errors>
                        <label>Powtórz nowe hasło</label>
                        <input type="password"
                            name="newPasswordRepeat"
                            class="form-control"
                            required
                            same-as="{{ $ctrl.change.newPassword }}"
                            ng-model="$ctrl.newPasswordConfirmation">
                        <span class="help-block">Podaj jeszcze raz takie samo hasło.</span>
                    </div>
                    <div class="text-right">
                        <button type="submit"
                            class="btn btn-primary btn-raised btn-lg">
                            <fa name="lock"
                                fw></fa>
                            Zmień hasło
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
